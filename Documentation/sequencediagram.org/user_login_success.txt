sequenceDiagram
title User login (Success)
actor u as User
participant  app as App/UI
participant svc as Service
participant auth as Auth server
participant db as Database
participant r as Redis 

u->>app:Logs in
app->>svc:Login request
activate svc
svc->>auth:Mediate
activate auth
auth->>db:Validate user
db-->>auth: Validated
auth->>auth:Generate session Id (with expirey)
auth->>r:Store (sessionId, userId, IP address, expirey)
auth->>db: Retrieve entitlements/roles
db-->>auth: Entitlements/roles
auth->>r: Store (entitlements/roles, userId)
auth-->>svc:Mediation response 200 OK
deactivate auth
svc->>svc:Sets sessionId cookie for response
svc-->>app: Response 200 Ok
deactivate svc
